# AI-FTB Proje Dok√ºmantasyonu

## üìã ƒ∞√ßindekiler

1. [Proje √ñzeti](#proje-√∂zeti)
2. [Mimari Tasarƒ±m](#mimari-tasarƒ±m)
3. [Mod√ºl Detaylarƒ±](#mod√ºl-detaylarƒ±)
4. [Algoritma A√ßƒ±klamalarƒ±](#algoritma-a√ßƒ±klamalarƒ±)
5. [Performans Metrikleri](#performans-metrikleri)
6. [Geli≈ütirme Rehberi](#geli≈ütirme-rehberi)
7. [Sƒ±k Sorulan Sorular](#sƒ±k-sorulan-sorular)

## üéØ Proje √ñzeti

### Ama√ß
AI-FTB, ge√ßmi≈ü fiyat hareketlerini ve finansal haber metinlerini analiz ederek yapay zeka destekli alƒ±m-satƒ±m sinyalleri √ºreten bir finansal ticaret botudur.

### Temel Prensipler
- **Mod√ºlerlik**: Her i≈ülev ayrƒ± mod√ºlde
- **Temizlik**: PEP 8 uyumlu, okunabilir kod
- **G√ºvenilirlik**: Kapsamlƒ± hata y√∂netimi
- **≈ûeffaflƒ±k**: Detaylƒ± loglama ve raporlama
- **Geni≈ületilebilirlik**: Yeni √∂zellik eklemesi kolay

### Teknoloji Stack
- **Dil**: Python 3.9+
- **ML**: scikit-learn (RandomForest, LogisticRegression)
- **Veri**: pandas, numpy, yfinance
- **NLP**: TextBlob, NLTK
- **Loglama**: Python logging
- **Dosya**: CSV, JSON, joblib

## üèóÔ∏è Mimari Tasarƒ±m

### Genel Akƒ±≈ü
```
Veri √áekme ‚Üí √ñzellik M√ºhendisliƒüi ‚Üí ML Eƒüitimi ‚Üí Strateji ‚Üí Backtest ‚Üí Rapor
```

### Katman Yapƒ±sƒ±
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Ana Program (main.py)                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Strateji Katmanƒ± (strategy_executor.py, backtester.py)    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ML Katmanƒ± (ml_model.py, feature_engineer.py)             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Veri Katmanƒ± (data_handler.py, news_sentiment_analyzer.py)‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Altyapƒ± Katmanƒ± (config.py, logger.py)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Veri Akƒ±≈üƒ±
```
Yahoo Finance ‚Üí Raw Data ‚Üí Technical Indicators ‚Üí ML Features ‚Üí Model ‚Üí Signals ‚Üí Trading Decisions ‚Üí Performance Report
      ‚Üì              ‚Üì                ‚Üì              ‚Üì         ‚Üì        ‚Üì               ‚Üì
News Sources ‚Üí Text Data ‚Üí Sentiment Analysis ‚Üí Sentiment Score ‚îÄ‚îò    Risk Management ‚îÄ‚îò
```

## üìö Mod√ºl Detaylarƒ±

### 1. config.py - Konfig√ºrasyon Y√∂netimi

**Ama√ß**: T√ºm bot ayarlarƒ±nƒ± merkezi y√∂netim

**Ana Bile≈üenler**:
- `SYMBOLS`: ƒ∞≈ülem sembolleri
- `ML_MODEL_TYPE`: Model se√ßimi
- `RISK_PER_TRADE_PERCENT`: Risk y√∂netimi
- `TECHNICAL_INDICATORS`: G√∂sterge parametreleri

**Kullanƒ±m**:
```python
import config
symbols = config.SYMBOLS
risk = config.RISK_PER_TRADE_PERCENT
```

### 2. logger.py - Loglama Sistemi

**Ama√ß**: Merkezi loglama ve hata takibi

**Ana Fonksiyonlar**:
- `setup_logger()`: Logger kurulumu
- `log_info()`, `log_error()`: Mesaj loglama
- `log_trade_decision()`: Ticaret kararlarƒ±nƒ± logla

**√ñzellikler**:
- Dosya ve konsol √ßƒ±ktƒ±sƒ±
- Timestamp ve fonksiyon bilgisi
- Farklƒ± log seviyeleri (DEBUG, INFO, WARNING, ERROR)

### 3. data_handler.py - Veri Y√∂netimi

**Ama√ß**: Finansal veri √ßekme ve √∂n i≈üleme

**Ana Fonksiyonlar**:
- `fetch_historical_data()`: yfinance ile veri √ßekme
- `save_data()`, `load_data()`: Veri kaydetme/y√ºkleme
- `validate_data_quality()`: Veri kalite kontrol√º

**Veri ƒ∞≈üleme Adƒ±mlarƒ±**:
1. API'den raw veri √ßekme
2. Eksik veri doldurma (forward/backward fill)
3. Negatif deƒüer kontrol√º
4. Datetime index doƒürulama
5. CSV formatƒ±nda kaydetme

### 4. feature_engineer.py - √ñzellik M√ºhendisliƒüi

**Ama√ß**: Ham veriden ML √∂zellikleri t√ºretme

**Teknik G√∂stergeler**:
- **RSI (Relative Strength Index)**: 14 periyot
- **MACD**: 12/26/9 parametreleri
- **Bollinger Bands**: 20 periyot, 2 std
- **SMA**: 20 ve 50 periyot
- **Volatilite**: 14 periyot standart sapma

**√ñzellik √ñl√ßeklendirme**:
- StandardScaler veya MinMaxScaler
- Eƒüitim verisi √ºzerinde fit
- Test verisine transform
- Scaler kaydetme/y√ºkleme

### 5. news_sentiment_analyzer.py - Duygu Analizi

**Ama√ß**: Haber metinlerinden duygu skoru √ßƒ±karma

**ƒ∞≈ü Akƒ±≈üƒ±**:
1. Haber √ßekme (API veya mock data)
2. Metin temizleme (HTML, URL kaldƒ±rma)
3. √ñn i≈üleme (k√º√ß√ºk harf, noktalama)
4. TextBlob ile duygu analizi
5. Sayƒ±sal skor (-1.0 ile 1.0 arasƒ±)

**Duygu Skoru Hesaplama**:
```python
polarity = TextBlob(text).sentiment.polarity
# -1.0: √áok negatif
#  0.0: N√∂tr
# +1.0: √áok pozitif
```

### 6. ml_model.py - Makine √ñƒürenimi

**Ama√ß**: ML modeli eƒüitimi ve tahmin

**Desteklenen Modeller**:
- **RandomForestClassifier**: Ensemble method
- **LogisticRegression**: Linear classifier

**Model Eƒüitimi**:
1. Veri hazƒ±rlama (X, y ayrƒ±mƒ±)
2. Train/test split (80/20)
3. Model eƒüitimi
4. Cross-validation (5-fold)
5. Performance deƒüerlendirme
6. Model kaydetme

**Tahmin S√ºreci**:
- Binary sƒ±nƒ±flandƒ±rma (1: Fiyat artacak, 0: D√º≈üecek)
- Olasƒ±lƒ±k tahmini
- Sinyal d√∂n√º≈ü√ºm√º (BUY/SELL/HOLD)

### 7. strategy_executor.py - Strateji Y√ºr√ºtme

**Ama√ß**: ML sinyali + duygu skorunu birle≈ütirme

**Karar Matrisi**:
```
ML=1, Sentiment>0.2  ‚Üí BUY  (G√ºven: 0.8+)
ML=-1, Sentiment<-0.2 ‚Üí SELL (G√ºven: 0.8+)
ML=1, Sentiment>0    ‚Üí BUY  (G√ºven: 0.6+)
ML=-1, Sentiment<0   ‚Üí SELL (G√ºven: 0.6+)
√áeli≈ükili sinyaller  ‚Üí HOLD (G√ºven: 0.3)
```

**Risk Y√∂netimi**:
- **Pozisyon B√ºy√ºkl√ºƒü√º**: (Portf√∂y √ó Risk%) / Stop Loss%
- **Stop Loss**: Giri≈ü fiyatƒ±nƒ±n %2 altƒ±
- **Take Profit**: Giri≈ü fiyatƒ±nƒ±n %4 √ºst√º

### 8. backtester.py - Performans Testi

**Ama√ß**: Tarihsel veriler √ºzerinde strateji sim√ºlasyonu

**Backtest S√ºreci**:
1. G√ºnl√ºk veri d√∂ng√ºs√º
2. Her g√ºn i√ßin ML tahmini
3. Duygu skoru alƒ±mƒ±
4. Strateji kararƒ±
5. Risk y√∂netimi kontrol√º
6. Sanal i≈ülem ger√ßekle≈ütirme
7. Portf√∂y deƒüeri g√ºncelleme

**Performans Metrikleri**:
- Toplam getiri (%)
- Maksimum d√º≈ü√º≈ü (%)
- Sharpe ratio
- Kazanma oranƒ± (%)
- Profit factor

## üßÆ Algoritma A√ßƒ±klamalarƒ±

### RSI Hesaplama
```python
def calculate_rsi(prices, period=14):
    delta = prices.diff()
    gains = delta.where(delta > 0, 0)
    losses = -delta.where(delta < 0, 0)
    
    avg_gains = gains.rolling(window=period).mean()
    avg_losses = losses.rolling(window=period).mean()
    
    rs = avg_gains / avg_losses
    rsi = 100 - (100 / (1 + rs))
    return rsi
```

### MACD Hesaplama
```python
def calculate_macd(prices, fast=12, slow=26, signal=9):
    ema_fast = prices.ewm(span=fast).mean()
    ema_slow = prices.ewm(span=slow).mean()
    
    macd_line = ema_fast - ema_slow
    signal_line = macd_line.ewm(span=signal).mean()
    histogram = macd_line - signal_line
    
    return macd_line, signal_line, histogram
```

### Duygu Skoru Hesaplama
```python
def analyze_sentiment(text):
    blob = TextBlob(text)
    polarity = blob.sentiment.polarity
    subjectivity = blob.sentiment.subjectivity
    
    # Objektif metinlerde duygu skorunu azalt
    if subjectivity < 0.1:
        polarity *= 0.5
        
    return polarity
```

### Pozisyon B√ºy√ºkl√ºƒü√º Hesaplama
```python
def calculate_position_size(portfolio_value, current_price, risk_percent, stop_loss_percent):
    risk_amount = portfolio_value * risk_percent
    max_investment = risk_amount / stop_loss_percent
    shares = int(max_investment / current_price)
    return shares
```

## üìä Performans Metrikleri

### Getiri Metrikleri

**Toplam Getiri**:
```
Total Return = (Final Value - Initial Capital) / Initial Capital √ó 100
```

**Yƒ±llƒ±k Getiri**:
```
Annualized Return = (Final Value / Initial Capital)^(365/Days) - 1
```

### Risk Metrikleri

**Maksimum D√º≈ü√º≈ü**:
```
Max Drawdown = Min((Portfolio Value - Running Max) / Running Max)
```

**Sharpe Ratio**:
```
Sharpe Ratio = (Average Daily Return √ó 252) / (Daily Return Std √ó ‚àö252)
```

**Volatilite**:
```
Volatility = Daily Return Std √ó ‚àö252 √ó 100
```

### ƒ∞≈ülem Metrikleri

**Kazanma Oranƒ±**:
```
Win Rate = Winning Trades / Total Trades √ó 100
```

**Profit Factor**:
```
Profit Factor = Gross Profit / Gross Loss
```

### Performans Notu Hesaplama
```python
def calculate_performance_grade(total_return, max_drawdown, win_rate, sharpe_ratio):
    score = 0
    
    # Getiri (40% aƒüƒ±rlƒ±k)
    if total_return >= 20: score += 40
    elif total_return >= 15: score += 35
    elif total_return >= 10: score += 30
    
    # Risk (30% aƒüƒ±rlƒ±k)  
    if max_drawdown >= -5: score += 30
    elif max_drawdown >= -10: score += 25
    
    # Kazanma oranƒ± (20% aƒüƒ±rlƒ±k)
    if win_rate >= 60: score += 20
    elif win_rate >= 55: score += 18
    
    # Sharpe ratio (10% aƒüƒ±rlƒ±k)
    if sharpe_ratio >= 2.0: score += 10
    elif sharpe_ratio >= 1.5: score += 8
    
    # Not hesaplama
    if score >= 90: return 'A+'
    elif score >= 85: return 'A'
    # ... devamƒ±
```

## üõ†Ô∏è Geli≈ütirme Rehberi

### Yeni Teknik G√∂sterge Ekleme

1. **G√∂sterge Fonksiyonu Yazma**:
```python
def calculate_stochastic(high, low, close, period=14):
    lowest_low = low.rolling(window=period).min()
    highest_high = high.rolling(window=period).max()
    
    k_percent = ((close - lowest_low) / (highest_high - lowest_low)) * 100
    d_percent = k_percent.rolling(window=3).mean()
    
    return k_percent, d_percent
```

2. **Ana Fonksiyona Ekleme**:
```python
def add_technical_indicators(dataframe):
    # Mevcut g√∂stergeler...
    
    # Yeni g√∂sterge
    data['Stoch_K'], data['Stoch_D'] = calculate_stochastic(
        data['High'], data['Low'], data['Close']
    )
```

3. **Config'e Ekleme**:
```python
ML_FEATURES = [..., 'Stoch_K', 'Stoch_D']
```

### Yeni ML Modeli Ekleme

1. **Model Import**:
```python
from sklearn.svm import SVC
```

2. **Model Se√ßimi**:
```python
elif model_type == 'SVC':
    model = SVC(**params)
```

3. **Config Parametreleri**:
```python
ML_MODEL_TYPE = 'SVC'
ML_MODEL_PARAMS = {'C': 1.0, 'kernel': 'rbf'}
```

### Yeni Duygu Analizi Kaynaƒüƒ±

1. **API Entegrasyonu**:
```python
def fetch_twitter_sentiment(query, date):
    # Twitter API √ßaƒürƒ±sƒ±
    tweets = twitter_api.search(query, date)
    sentiments = [analyze_sentiment(tweet) for tweet in tweets]
    return np.mean(sentiments)
```

2. **Ana Fonksiyona Ekleme**:
```python
def get_news_sentiment_for_date(symbol, date):
    news_sentiment = fetch_financial_news(symbol, date)
    twitter_sentiment = fetch_twitter_sentiment(symbol, date)
    
    # Aƒüƒ±rlƒ±klƒ± ortalama
    combined_sentiment = (news_sentiment * 0.7 + twitter_sentiment * 0.3)
    return combined_sentiment
```

### Yeni Strateji Kuralƒ±

1. **Karar Mantƒ±ƒüƒ± Geni≈ületme**:
```python
def generate_trade_decision(ml_signal, news_sentiment, volume_spike=False):
    # Mevcut mantƒ±k...
    
    # Yeni kural: Y√ºksek hacim AL sinyalini g√º√ßlendirir
    if volume_spike and ml_signal == 1:
        confidence *= 1.2
        reasoning_parts.append("Y√ºksek hacim AL sinyalini destekliyor")
```

## ‚ùì Sƒ±k Sorulan Sorular

### Genel Sorular

**S: Bot ger√ßek parayla i≈ülem yapƒ±yor mu?**
C: Hayƒ±r, sadece sim√ºlasyon ve analiz yapar. Ger√ßek i≈ülem entegrasyonu mevcut deƒüil.

**S: Hangi piyasalarda √ßalƒ±≈üƒ±r?**
C: yfinance'in desteklediƒüi t√ºm piyasalarda (ABD, Avrupa, Asya hisse senetleri).

**S: Ne kadar veri gerekli?**
C: Minimum 100 g√ºnl√ºk tarihsel veri √∂neriliyor, ideal olarak 1+ yƒ±l.

### Teknik Sorular

**S: Model ne kadar sƒ±klƒ±kla yeniden eƒüitilmeli?**
C: Piyasa ko≈üullarƒ±na baƒülƒ± olarak ayda bir veya √ßeyrek yƒ±lda bir.

**S: Hangi teknik g√∂stergeler en etkili?**
C: Feature importance analizi ile belirlenir, genellikle RSI ve MACD √∂ne √ßƒ±kar.

**S: Duygu analizi ne kadar doƒüru?**
C: TextBlob basit bir ara√ßtƒ±r, %60-70 doƒüruluk. ƒ∞leri seviye i√ßin BERT kullanƒ±labilir.

### Performans Sorular

**S: Tipik backtest getirisi nedir?**
C: Piyasa ko≈üullarƒ±na g√∂re deƒüi≈üir, %5-20 yƒ±llƒ±k getiri makul beklenti.

**S: Maximum drawdown ne olmalƒ±?**
C: %10'un altƒ±nda ideal, %20'nin √ºst√º riskli kabul edilir.

**S: Ka√ß sembolde test etmeliyim?**
C: √áe≈üitlilik i√ßin en az 5-10 farklƒ± sekt√∂rden sembol √∂nerilir.

### Hata Giderme

**S: "Import error" alƒ±yorum**
C: `pip install -r requirements.txt` komutunu √ßalƒ±≈ütƒ±rƒ±n.

**S: Veri √ßekilmiyor**
C: ƒ∞nternet baƒülantƒ±sƒ±nƒ± kontrol edin, sembol adlarƒ±nƒ±n doƒüru olduƒüundan emin olun.

**S: Model eƒüitimi √ßok yava≈ü**
C: Daha az veri kullanƒ±n veya model karma≈üƒ±klƒ±ƒüƒ±nƒ± azaltƒ±n.

### Geli≈ütime Sorularƒ±

**S: Kendi stratejimi nasƒ±l eklerim?**
C: `strategy_executor.py` dosyasƒ±ndaki `generate_trade_decision()` fonksiyonunu d√ºzenleyin.

**S: Yeni veri kaynaƒüƒ± nasƒ±l eklerim?**
C: `data_handler.py` dosyasƒ±na yeni fonksiyon ekleyin ve `main.py`'da √ßaƒüƒ±rƒ±n.

**S: Real-time trading nasƒ±l implement edilir?**
C: Broker API entegrasyonu gerekir (Alpaca, Interactive Brokers vb.).

---

Bu dok√ºmantasyon projenin teknik detaylarƒ±nƒ± kapsamlƒ± ≈üekilde a√ßƒ±klamaktadƒ±r. Geli≈ütirme sƒ±rasƒ±nda referans olarak kullanƒ±labilir.
